{"version":3,"sources":["./src/app/pages/downloaded-book/downloaded-book-routing.module.ts","./src/app/pages/downloaded-book/downloaded-book.module.ts","./src/app/pages/downloaded-book/downloaded-book.page.ts","./src/app/pages/downloaded-book/downloaded-book.page.scss","./src/app/pages/downloaded-book/downloaded-book.page.html"],"names":[],"mappings":"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","file":"src_app_pages_downloaded-book_downloaded-book_module_ts.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { DownloadedBookPage } from './downloaded-book.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DownloadedBookPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class DownloadedBookPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { DownloadedBookPageRoutingModule } from './downloaded-book-routing.module';\n\nimport { DownloadedBookPage } from './downloaded-book.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    DownloadedBookPageRoutingModule\n  ],\n  declarations: [DownloadedBookPage]\n})\nexport class DownloadedBookPageModule {}\n","import {Component, OnInit} from '@angular/core';\nimport {BOOK_KEY, HttpService} from '../../services/http.service';\nimport {FileOpener} from '@ionic-native/file-opener/ngx';\nimport {Directory, Filesystem} from '@capacitor/filesystem';\nimport {Storage} from '@capacitor/storage';\n\n@Component({\n  selector: 'app-downloaded-book',\n  templateUrl: './downloaded-book.page.html',\n  styleUrls: ['./downloaded-book.page.scss'],\n})\nexport class DownloadedBookPage implements OnInit {\n  books = [];\n  constructor(private httpService: HttpService, private fileOpener: FileOpener) { }\n\n  ngOnInit() {\n    this.httpService.getBook().then((books) => {\n      this.books = books;\n    });\n  }\n\n  openBook(book) {\n    console.log(book);\n    const name = book.substr(book.lastIndexOf('/') + 1);\n    const mimeType = this.httpService.getMimeType(name);\n    this.fileOpener.showOpenWithDialog(book, mimeType).then(() => {\n      console.log('book opened');\n    }).catch((e) => {\n      console.log('Error: ', e);\n    });\n  }\n\n  async deleteBook(book) {\n    const name = book.substr(book.lastIndexOf('/') + 1);\n\n    await Filesystem.deleteFile({\n      path: name,\n      directory: Directory.Documents\n    });\n    this.books = this.books.filter(filePath => filePath !== book);\n    await Storage.set({\n      key: BOOK_KEY,\n      value: JSON.stringify(this.books)\n    });\n\n  }\n\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJkb3dubG9hZGVkLWJvb2sucGFnZS5zY3NzIn0= */\";","export default \"<ion-header>\\n  <ion-toolbar color=\\\"primary\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"/landing\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>کتاب‌های دانلود شده</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content class=\\\"ion-padding\\\">\\n  <ion-list dir=\\\"ltr\\\">\\n    <ion-item-sliding *ngFor=\\\"let book of books\\\">\\n      <ion-item (click)=\\\"openBook(book)\\\" tappable>\\n        <ion-avatar *ngIf=\\\"book.substr(book.lastIndexOf('.') + 1) == 'pdf'\\\">\\n          <img src=\\\"assets/img/pdf3.png\\\">\\n        </ion-avatar>\\n        <ion-avatar *ngIf=\\\"book.substr(book.lastIndexOf('.') + 1) == 'chm'\\\">\\n          <img src=\\\"assets/img/chm-icon.png\\\">\\n        </ion-avatar>\\n        <ion-avatar *ngIf=\\\"book.substr(book.lastIndexOf('.') + 1) == 'epub'\\\">\\n          <img src=\\\"assets/img/epub.png\\\">\\n        </ion-avatar>\\n        <ion-label class=\\\"ion-margin-start\\\">\\n          {{book.substr(book.lastIndexOf('/') + 1)}}\\n        </ion-label>\\n      </ion-item>\\n\\n      <ion-item-options side=\\\"end\\\" dir=\\\"rtl\\\">\\n        <ion-item-option color=\\\"danger\\\" (click)=\\\"deleteBook(book)\\\">\\n          <ion-icon name=\\\"trash\\\" slot=\\\"icon-only\\\"></ion-icon>\\n        </ion-item-option>\\n      </ion-item-options>\\n    </ion-item-sliding>\\n  </ion-list>\\n\\n</ion-content>\\n\";"],"sourceRoot":"webpack:///"}