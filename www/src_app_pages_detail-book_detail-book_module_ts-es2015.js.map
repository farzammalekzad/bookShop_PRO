{"version":3,"sources":["./node_modules/@capacitor/share/dist/esm/definitions.js","./node_modules/@capacitor/share/dist/esm/index.js","./src/app/pages/detail-book/detail-book-routing.module.ts","./src/app/pages/detail-book/detail-book.module.ts","./src/app/pages/detail-book/detail-book.page.ts","./src/app/services/download-book.service.ts","./src/app/pages/detail-book/detail-book.page.scss","./src/app/pages/detail-book/detail-book.page.html"],"names":[],"mappings":"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","file":"src_app_pages_detail-book_detail-book_module_ts-es2015.js","sourcesContent":["export {};\n//# sourceMappingURL=definitions.js.map","import { registerPlugin } from '@capacitor/core';\nconst Share = registerPlugin('Share', {\n    web: () => import('./web').then(m => new m.ShareWeb()),\n});\nexport * from './definitions';\nexport { Share };\n//# sourceMappingURL=index.js.map","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { DetailBookPage } from './detail-book.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DetailBookPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class DetailBookPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { DetailBookPageRoutingModule } from './detail-book-routing.module';\n\nimport { DetailBookPage } from './detail-book.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    DetailBookPageRoutingModule\n  ],\n  declarations: [DetailBookPage]\n})\nexport class DetailBookPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport {ActivatedRoute, Router} from '@angular/router';\nimport {BookModel, SearchBookModel} from '../../services/library.service';\nimport {HttpService} from '../../services/http.service';\nimport {DomSanitizer} from '@angular/platform-browser';\nimport {DownloadBookService} from '../../services/download-book.service';\nimport {FavoritesService} from '../../services/favorites.service';\nimport {AlertController, LoadingController, ToastController} from '@ionic/angular';\nimport {Share} from '@capacitor/share';\nimport {Storage} from '@capacitor/storage';\nimport {TRIAL_KEY} from '../tutorial/tutorial.page';\n\n@Component({\n  selector: 'app-detail-book',\n  templateUrl: './detail-book.page.html',\n  styleUrls: ['./detail-book.page.scss'],\n})\nexport class DetailBookPage implements OnInit {\n  book: SearchBookModel;\n  data = null;\n  myImage = null;\n  myBook = null;\n  isLoading = false;\n  constructor(private activatedRoute: ActivatedRoute,\n              private router: Router,\n              private httpService: HttpService,\n              private domSanitizer: DomSanitizer,\n              private downloadBookService: DownloadBookService,\n              private favorService: FavoritesService,\n              private toastCtrl: ToastController,\n              private loadingCtrl: LoadingController,\n              private alertCtrl: AlertController) { }\n\n\n   ngOnInit() {\n\n    this.activatedRoute.queryParams.subscribe((book) => {\n      this.isLoading = true;\n      if (this.router.getCurrentNavigation().extras.state.data) {\n        this.book = this.router.getCurrentNavigation().extras.state.data;\n        this.isLoading = false;\n      }\n    }, e => {\n      console.log(e);\n    });\n  }\n\n async downloadFile(url) {\n    const toast = await this.toastCtrl.create({\n      message: 'اشکالی در ارتباط با سرور وجود دارد',\n      duration: 1500\n    });\n    this.httpService.downloadFile(url).then((base64) => {\n      this.myImage = this.domSanitizer.bypassSecurityTrustResourceUrl(base64);\n    }).catch(e => {\n      toast.present();\n    });\n  }\n\n  async download(url, name) {\n    //const trial = await Storage.get({key: TRIAL_KEY});\n    //console.log(JSON.parse(trial.value));\n    //if (JSON.parse(trial.value)) {\n      const loading = await this.loadingCtrl.create({\n        message: 'لطفا منتظر بمانید'\n      });\n      const toast = await this.toastCtrl.create({\n        message: 'اشکالی در ارتباط با سرور وجود دارد',\n        duration: 1500\n      });\n      loading.present();\n      if (this.book.extension == 'pdf') {\n        console.log('pdf');\n        this.httpService.downloadBook(encodeURI(url), name).then(async (base64) => {\n          this.myBook = base64;\n          loading.dismiss();\n          await Storage.set({key: TRIAL_KEY, value: JSON.stringify(false)});\n        }).catch(e => {\n          toast.present();\n          loading.dismiss();\n        });\n      } else if (this.book.extension == 'chm') {\n        console.log('chm');\n        this.httpService.downloadBookChm(encodeURI(url), name).then(async (base64) => {\n          this.myBook = base64;\n          loading.dismiss();\n          await Storage.set({key: TRIAL_KEY, value: JSON.stringify(false)});\n        }).catch(e => {\n          toast.present();\n          loading.dismiss();\n        });\n      } else if (this.book.extension == 'epub') {\n        console.log('epub');\n        this.httpService.downloadBookEpub(encodeURI(url), name).then(async (base64) => {\n          this.myBook = base64;\n          loading.dismiss();\n          await Storage.set({key: TRIAL_KEY, value: JSON.stringify(false)});\n        }).catch(e => {\n          toast.present();\n          loading.dismiss();\n        });\n      }\n    //}\n    // Pro version (Trial version commented)\n    /*else {\n      const alert = await this.alertCtrl.create({\n        header: 'خریداری نسخه کامل',\n        message: 'برای دانلود بیش از یک کتاب باید نسخه کامل خریداری شود',\n        buttons: ['باشه']\n      });\n      alert.present();\n    }*/\n  }\n\n  async addFavorites() {\n    const toast = await this.toastCtrl.create({\n      message: 'کتاب به علاقمندی‌ها اضافه شد',\n      duration: 1500\n    });\n    this.favorService.addFavor(this.book).then(() => {\n      toast.present();\n      console.log('added to storage');\n    }).catch(e => {\n      console.log('Error', e);\n    });\n\n\n\n  }\n\n  async share() {\n    await Share.share({\n      text: `به شما کتاب زیر با عنوان: ${this.book.title} - نویسنده: ${this.book.author} - زبان: ${this.book.language} - فرمت: ${this.book.extension}در این اپلیکیشن پیشنهاد شده است`,\n      url: 'https://cafebazaar.ir/app/ir.mohammad.malekzad.ketabyablite'\n    });\n  }\n\n}\n","import {Injectable} from '@angular/core';\nimport {HttpClient, HttpEventType} from '@angular/common/http';\nimport {FileOpener} from '@ionic-native/file-opener/ngx';\nimport {Directory, Filesystem} from '@capacitor/filesystem';\nimport {Storage} from '@capacitor/storage';\n\nexport const BOOK_KEY = 'book';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DownloadBookService {\n  downloadProgress = 0;\n  myBooks = [];\n\n  constructor(private http: HttpClient, private fileOpener: FileOpener) { }\n\n  downloadBook(url) {\n    const proxyUrl = url;\n    return this.http.get(proxyUrl, {\n      responseType: 'blob',\n      reportProgress: true,\n      observe: 'events'\n    }).subscribe(async (event) => {\n      if (event.type === HttpEventType.DownloadProgress ) {\n        this.downloadProgress = Math.round(100 * (event.loaded/event.total));\n      } else if (event.type === HttpEventType.Response) {\n        this.downloadProgress = 0;\n        const name = `${Date.now()}`;\n        const base64 = await this.convertBlobToBase64(event.body) as string;\n        const savedFile = await Filesystem.writeFile({\n          path: name,\n          data: base64,\n          directory: Directory.Documents\n        });\n        const path = savedFile.uri;\n        const mimeType = this.getMimeType(name);\n        this.fileOpener.open(path,mimeType).then(() => {\n          console.log('File Opened');\n        }).catch((err) => {\n          console.log('error in opening file', err);\n        });\n        this.myBooks.unshift(path);\n        await Storage.set({key: BOOK_KEY, value: JSON.stringify(this.myBooks)});\n      }\n    });\n  }\n\n  public convertBlobToBase64 = (blob: Blob) => new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onerror = reject;\n    reader.onload = () => {\n      resolve(reader.result);\n    };\n    reader.readAsDataURL(blob);\n  });\n\n  public getMimeType(name) {\n    if (name.indexOf('pdf') >= 0) {\n      return 'application/pdf';\n    } else if (name.indexOf('chm') >= 0) {\n      return 'application/chm';\n    }\n  }\n\n\n\n\n\n\n}\n","export default \".set-icon {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n}\\n\\n.set-size {\\n  height: 100px;\\n  width: 100px;\\n  color: var(--ion-color-tertiary);\\n}\\n\\nimg {\\n  border: 2px solid var(--ion-color-primary);\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRldGFpbC1ib29rLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGFBQUE7RUFDQSx1QkFBQTtFQUNBLG1CQUFBO0FBQ0Y7O0FBQ0E7RUFDRSxhQUFBO0VBQ0EsWUFBQTtFQUNBLGdDQUFBO0FBRUY7O0FBQ0E7RUFDRSwwQ0FBQTtBQUVGIiwiZmlsZSI6ImRldGFpbC1ib29rLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5zZXQtaWNvbiB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xufVxuLnNldC1zaXplIHtcbiAgaGVpZ2h0OiAxMDBweDtcbiAgd2lkdGg6IDEwMHB4O1xuICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLXRlcnRpYXJ5KTtcbn1cblxuaW1nIHtcbiAgYm9yZGVyOiAycHggc29saWQgdmFyKC0taW9uLWNvbG9yLXByaW1hcnkpO1xufVxuIl19 */\";","export default \"<ion-header>\\n  <ion-toolbar color=\\\"tertiary\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"/search/detail\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>اطلاعات کتاب و دانلود</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content class=\\\"ion-padding\\\">\\n  <div *ngIf=\\\"isLoading\\\" class=\\\"ion-text-center\\\">\\n    <ion-spinner color=\\\"primary\\\"></ion-spinner>\\n  </div>\\n  <ion-grid *ngIf=\\\"!isLoading\\\">\\n    <ion-row>\\n      <ion-col size-sm = 12 size-md=\\\"8\\\" offset-md = \\\"2\\\" class=\\\"ion-text-center\\\">\\n        <img [src]=\\\"myImage\\\" *ngIf=\\\"myImage\\\">\\n      </ion-col>\\n    </ion-row>\\n    <ion-row class=\\\"ion-justify-content-center\\\">\\n      <ion-col class=\\\"set-icon\\\" size=\\\"12\\\">\\n        <ion-item [hidden]=\\\"myImage\\\"  lines=\\\"none\\\">\\n          <ion-icon name=\\\"book-sharp\\\" class=\\\"set-size\\\"></ion-icon>\\n        </ion-item>\\n      </ion-col>\\n    </ion-row>\\n    <ion-row>\\n      <ion-col size-sm = 12 size-md=\\\"8\\\" offset-md = \\\"2\\\">\\n        <ion-item lines=\\\"none\\\">\\n          <ion-icon name=\\\"reorder-four\\\"></ion-icon>\\n          <ion-label><h2>عنوان:</h2></ion-label>\\n        </ion-item>\\n        <ion-item dir=\\\"ltr\\\" lines=\\\"full\\\">\\n          <ion-text>{{book.title}}</ion-text>\\n        </ion-item>\\n      </ion-col>\\n    </ion-row>\\n    <ion-row>\\n      <ion-col size-sm = 12 size-md=\\\"8\\\" offset-md = \\\"2\\\">\\n        <ion-item lines=\\\"none\\\">\\n          <ion-icon name=\\\"clipboard-outline\\\"></ion-icon>\\n          <ion-label><h2>نویسنده :</h2></ion-label>\\n        </ion-item>\\n        <ion-item dir=\\\"ltr\\\" lines=\\\"full\\\">\\n          <ion-text>{{book.author}}</ion-text>\\n        </ion-item>\\n      </ion-col>\\n    </ion-row>\\n\\n    <ion-row>\\n      <ion-col size-sm = 12 size-md=\\\"8\\\" offset-md = \\\"2\\\">\\n        <ion-item lines=\\\"none\\\">\\n          <ion-icon name=\\\"language-outline\\\"></ion-icon>\\n          <ion-label><h2>زبان کتاب :</h2></ion-label>\\n        </ion-item>\\n        <ion-item dir=\\\"ltr\\\" lines=\\\"full\\\">\\n          <ion-text>{{book.language}}</ion-text>\\n        </ion-item>\\n      </ion-col>\\n    </ion-row>\\n    <ion-row>\\n      <ion-col size-sm = 12 size-md=\\\"8\\\" offset-md = \\\"2\\\">\\n        <ion-item lines=\\\"none\\\">\\n          <ion-icon name=\\\"expand-outline\\\"></ion-icon>\\n          <ion-label><h2>حجم فایل :</h2></ion-label>\\n        </ion-item>\\n        <ion-item dir=\\\"ltr\\\" lines=\\\"full\\\">\\n          <ion-text>{{book.filesize}}</ion-text>\\n        </ion-item>\\n      </ion-col>\\n    </ion-row>\\n    <ion-row>\\n      <ion-col size-sm = 12 size-md=\\\"8\\\" offset-md = \\\"2\\\">\\n        <ion-item lines=\\\"none\\\">\\n          <ion-icon name=\\\"apps-outline\\\"></ion-icon>\\n          <ion-label><h2>فرمت فایل:</h2></ion-label>\\n        </ion-item>\\n        <ion-item dir=\\\"ltr\\\" lines=\\\"full\\\">\\n          <ion-text>{{book.extension}}</ion-text>\\n        </ion-item>\\n      </ion-col>\\n    </ion-row>\\n\\n  </ion-grid>\\n\\n\\n\\n\\n  <ion-button (click)=\\\"downloadFile(this.book.bookImage)\\\" expand=\\\"block\\\" shape=\\\"round\\\" color=\\\"tertiary\\\" class=\\\"ion-margin\\\" [disabled]=\\\"myImage\\\" >مشاهده عکس کتاب</ion-button>\\n  <ion-button (click)=\\\"download(this.book.download, this.book.title)\\\" expand=\\\"block\\\" shape=\\\"round\\\" color=\\\"tertiary\\\" class=\\\"ion-margin\\\">دانلود کتاب</ion-button>\\n\\n  <ion-fab vertical=\\\"bottom\\\" horizontal=\\\"start\\\" slot=\\\"fixed\\\">\\n    <ion-fab-button color=\\\"danger\\\" (click)=\\\"addFavorites()\\\">\\n      <ion-icon name=\\\"heart\\\"></ion-icon>\\n    </ion-fab-button>\\n  </ion-fab>\\n\\n  <ion-fab vertical=\\\"bottom\\\" horizontal=\\\"end\\\" slot=\\\"fixed\\\">\\n    <ion-fab-button color=\\\"success\\\" (click)=\\\"share()\\\">\\n      <ion-icon name=\\\"share\\\"></ion-icon>\\n    </ion-fab-button>\\n  </ion-fab>\\n</ion-content>\\n\";"],"sourceRoot":"webpack:///"}