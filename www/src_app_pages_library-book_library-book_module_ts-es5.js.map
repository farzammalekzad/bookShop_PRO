{"version":3,"sources":["webpack:///src/app/pages/library-book/library-book-routing.module.ts","webpack:///src/app/pages/library-book/library-book.module.ts","webpack:///src/app/pages/library-book/library-book.page.ts","webpack:///src/app/pages/library-book/library-book.page.scss","webpack:///src/app/pages/library-book/library-book.page.html"],"names":["routes","path","component","LibraryBookPage","LibraryBookPageRoutingModule","NgModule","imports","RouterModule","exports","LibraryBookPageModule","CommonModule","FormsModule","IonicModule","declarations","activatedRoute","router","httpService","loadingCtrl","toastCtrl","queryParams","subscribe","books","getCurrentNavigation","extras","state","data","field","url","bookName","create","message","loading","duration","toast","present","downloadBook","encodeURI","then","dismiss","console","log","e","ActivatedRoute","Router","HttpService","LoadingController","ToastController","Component","selector","template"],"mappings":"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","file":"src_app_pages_library-book_library-book_module_ts-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { LibraryBookPage } from './library-book.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LibraryBookPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class LibraryBookPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { LibraryBookPageRoutingModule } from './library-book-routing.module';\n\nimport { LibraryBookPage } from './library-book.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    LibraryBookPageRoutingModule\n  ],\n  declarations: [LibraryBookPage]\n})\nexport class LibraryBookPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport {ActivatedRoute, Router} from '@angular/router';\nimport {AcademicModel, BookModel} from '../../services/library.service';\nimport {HttpService} from '../../services/http.service';\nimport {LoadingController, ToastController} from '@ionic/angular';\n\n@Component({\n  selector: 'app-library-book',\n  templateUrl: './library-book.page.html',\n  styleUrls: ['./library-book.page.scss'],\n})\nexport class LibraryBookPage implements OnInit {\n  field: AcademicModel;\n  books: BookModel[];\n  constructor(private activatedRoute: ActivatedRoute,\n              private router: Router,\n              private httpService: HttpService,\n              private loadingCtrl: LoadingController,\n              private toastCtrl: ToastController) { }\n\n  ngOnInit() {\n    this.activatedRoute.queryParams.subscribe((books) => {\n      if (this.router.getCurrentNavigation().extras.state.data) {\n        this.field = this.router.getCurrentNavigation().extras.state.data;\n        this.books = this.field.books;\n      }\n    });\n  }\n\n  async downloadPreview(url: string, bookName: string) {\n    const loading = await this.loadingCtrl.create({\n      message: 'لطفا منتظر بمانید'\n    });\n    const toast = await this.toastCtrl.create({\n      message: 'اشکالی در ارتباط با سرور وجود دارد',\n      duration: 1500\n    });\n    loading.present();\n    this.httpService.downloadBook(encodeURI(url), bookName).then(() => {\n      loading.dismiss();\n      console.log('download complete');\n    }).catch(e => {\n      toast.present();\n      loading.dismiss();\n    });\n  }\n\n\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJsaWJyYXJ5LWJvb2sucGFnZS5zY3NzIn0= */\";","export default \"<ion-header>\\n  <ion-toolbar color=\\\"primary\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"/library/book-category\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>{{field.field}}</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <div class=\\\"ion-padding\\\">\\n    <ion-card *ngFor=\\\"let book of books\\\">\\n      <ion-card-header>\\n        <ion-card-title>{{book.title}}</ion-card-title>\\n        <ion-card-subtitle>{{book.author}}</ion-card-subtitle>\\n      </ion-card-header>\\n      <ion-img src=\\\"{{book.imageUrl}}\\\"></ion-img>\\n        <ion-button (click)=\\\"downloadPreview(book.pdfUrl, book.title)\\\" [disabled]=\\\"book.fullVersion\\\" expand=\\\"block\\\" shape=\\\"round\\\" class=\\\"ion-margin\\\" color=\\\"warning\\\">دانلود نسخه نمونه</ion-button>\\n        <ion-button (click)=\\\"downloadPreview(book.pdfUrl, book.title)\\\" [disabled]=\\\"!book.fullVersion\\\" expand=\\\"block\\\" shape=\\\"round\\\" class=\\\"ion-margin\\\" color=\\\"tertiary\\\">دانلود نسخه کامل</ion-button>\\n\\n\\n    </ion-card>\\n  </div>\\n\\n\\n</ion-content>\\n\";"]}