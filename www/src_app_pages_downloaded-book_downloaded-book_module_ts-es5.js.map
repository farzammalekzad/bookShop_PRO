{"version":3,"sources":["webpack:///src/app/pages/downloaded-book/downloaded-book-routing.module.ts","webpack:///src/app/pages/downloaded-book/downloaded-book.module.ts","webpack:///src/app/pages/downloaded-book/downloaded-book.page.ts","webpack:///src/app/pages/downloaded-book/downloaded-book.page.scss","webpack:///src/app/pages/downloaded-book/downloaded-book.page.html"],"names":["routes","path","component","DownloadedBookPage","DownloadedBookPageRoutingModule","NgModule","imports","RouterModule","exports","DownloadedBookPageModule","CommonModule","FormsModule","IonicModule","declarations","httpService","fileOpener","books","getBook","then","book","console","log","name","substr","lastIndexOf","mimeType","getMimeType","showOpenWithDialog","e","Filesystem","directory","Directory","filter","filePath","Storage","key","BOOK_KEY","value","JSON","stringify","HttpService","FileOpener","Component","selector","template"],"mappings":"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","file":"src_app_pages_downloaded-book_downloaded-book_module_ts-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { DownloadedBookPage } from './downloaded-book.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DownloadedBookPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class DownloadedBookPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { DownloadedBookPageRoutingModule } from './downloaded-book-routing.module';\n\nimport { DownloadedBookPage } from './downloaded-book.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    DownloadedBookPageRoutingModule\n  ],\n  declarations: [DownloadedBookPage]\n})\nexport class DownloadedBookPageModule {}\n","import {Component, OnInit} from '@angular/core';\nimport {BOOK_KEY, HttpService} from '../../services/http.service';\nimport {FileOpener} from '@ionic-native/file-opener/ngx';\nimport {Directory, Filesystem} from '@capacitor/filesystem';\nimport {Storage} from '@capacitor/storage';\n\n@Component({\n  selector: 'app-downloaded-book',\n  templateUrl: './downloaded-book.page.html',\n  styleUrls: ['./downloaded-book.page.scss'],\n})\nexport class DownloadedBookPage implements OnInit {\n  books = [];\n  constructor(private httpService: HttpService, private fileOpener: FileOpener) { }\n\n  ngOnInit() {\n    this.httpService.getBook().then((books) => {\n      this.books = books;\n    });\n  }\n\n  openBook(book) {\n    console.log(book);\n    const name = book.substr(book.lastIndexOf('/') + 1);\n    const mimeType = this.httpService.getMimeType(name);\n    this.fileOpener.showOpenWithDialog(book, mimeType).then(() => {\n      console.log('book opened');\n    }).catch((e) => {\n      console.log('Error: ', e);\n    });\n  }\n\n  async deleteBook(book) {\n    const name = book.substr(book.lastIndexOf('/') + 1);\n\n    await Filesystem.deleteFile({\n      path: name,\n      directory: Directory.Documents\n    });\n    this.books = this.books.filter(filePath => filePath !== book);\n    await Storage.set({\n      key: BOOK_KEY,\n      value: JSON.stringify(this.books)\n    });\n\n  }\n\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJkb3dubG9hZGVkLWJvb2sucGFnZS5zY3NzIn0= */\";","export default \"<ion-header>\\n  <ion-toolbar color=\\\"primary\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"/landing\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>کتاب‌های دانلود شده</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content class=\\\"ion-padding\\\">\\n  <ion-list dir=\\\"ltr\\\">\\n    <ion-item-sliding *ngFor=\\\"let book of books\\\">\\n      <ion-item (click)=\\\"openBook(book)\\\" tappable>\\n        <ion-avatar *ngIf=\\\"book.substr(book.lastIndexOf('.') + 1) == 'pdf'\\\">\\n          <img src=\\\"assets/img/pdf3.png\\\">\\n        </ion-avatar>\\n        <ion-avatar *ngIf=\\\"book.substr(book.lastIndexOf('.') + 1) == 'chm'\\\">\\n          <img src=\\\"assets/img/chm-icon.png\\\">\\n        </ion-avatar>\\n        <ion-avatar *ngIf=\\\"book.substr(book.lastIndexOf('.') + 1) == 'epub'\\\">\\n          <img src=\\\"assets/img/epub.png\\\">\\n        </ion-avatar>\\n        <ion-label class=\\\"ion-margin-start\\\">\\n          {{book.substr(book.lastIndexOf('/') + 1)}}\\n        </ion-label>\\n      </ion-item>\\n\\n      <ion-item-options side=\\\"end\\\" dir=\\\"rtl\\\">\\n        <ion-item-option color=\\\"danger\\\" (click)=\\\"deleteBook(book)\\\">\\n          <ion-icon name=\\\"trash\\\" slot=\\\"icon-only\\\"></ion-icon>\\n        </ion-item-option>\\n      </ion-item-options>\\n    </ion-item-sliding>\\n  </ion-list>\\n\\n</ion-content>\\n\";"]}